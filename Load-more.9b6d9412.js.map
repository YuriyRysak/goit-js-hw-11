{"mappings":"gkBAOA,MAAMA,EAAaC,SAASC,cAAc,gBACpCC,EAAUF,SAASC,cAAc,YACjCE,EAAcH,SAASC,cAAc,cACrCG,EAAkBJ,SAASC,cAAc,kBAE/C,IAAII,EAAQ,GACRC,EAAO,EACPC,EAAa,EA2EjB,SAASC,EAAcC,GACnB,MAAMC,EAAgBD,EACjBE,KAAI,EAACC,GAAEA,EAAEC,cAAEA,EAAaC,aAAEA,EAAYC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,KAC5D,oDAC8BN,wDACCD,sCAClBE,WAAsBC,yJAGXC,4HAGAC,+HAGGC,gIAGCC,sHAQtCC,KAAK,IAEdlB,EAAQmB,mBAAmB,YAAaX,E,CAnGxCX,EAAWuB,iBAAiB,UAG5BC,eAA4BC,GAUxB,GATAA,EAAEC,iBAEFnB,EAAO,EACPD,EAAQmB,EAAEE,cAAcC,YAAYC,MAAMC,OAC1C3B,EAAQ4B,UAAY,GAEpB3B,EAAY4B,UAAUC,IAAI,aAC1B5B,EAAgB2B,UAAUC,IAAI,aAEhB,KAAV3B,EAEA,YA8FJ4B,EAAAC,GAASC,OAAOC,QAAQ,+BA3FxB,IACI,MACMC,SADe,EAAAC,EAAAC,UAASlC,EAAOC,EAtB7B,KAuBekC,KAGvB,GAFAjC,EAAa8B,EAAQI,KAAKC,OAEA,IAAtBL,EAAQM,UA0FhBV,EAAAC,GAASC,OAAOC,QAAQ,kEAxFT,CACH5B,EAAc6B,EAAQI,MA8EtC,SAA4BJ,GACxBJ,EAAAC,GAASC,OAAOS,QAAQ,oBAAoBP,EAAQM,oB,CA9ExCE,CAAmBR,GACI,IAAIJ,EAAAa,GAAJ,CAAmB,cAAcC,S,CAGxDV,EAAQM,UAlCR,IAmCAxC,EAAY4B,UAAUiB,OAAO,aAqFvCC,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,U,CAlFZ,MAAOC,GACLpB,EAAAC,GAASC,OAAOC,QAAQ,+B,KArChCjC,EAAYmB,iBAAiB,SA0C7BC,iBACIjB,GAAQ,EAGR,IACI,MACM+B,SADe,EAAAC,EAAAC,UAASlC,EAAOC,EAnD7B,KAoDekC,KAEjBG,EAAYN,EAAQM,UAC1BpC,GAAc8B,EAAQI,KAAKC,OAG3BlC,EAAc6B,EAAQI,MACK,IAAIR,EAAAa,GAAJ,CAAmB,cAAcC,UAExDxC,IAAeoC,IACfxC,EAAY4B,UAAUC,IAAI,aAC1B5B,EAAgB2B,UAAUiB,OAAO,cA+D7C,WACK,MAAQM,OAAQC,GAAevD,SAC3BC,cAAc,YACduD,kBAAkBC,wBAErBR,OAAOC,SAAS,CACdC,IAAkB,EAAbI,EACLH,SAAU,U,CAnEVM,E,CACF,MAAOL,GACLpB,EAAAC,GAASC,OAAOC,QAAQ,+B","sources":["src/js/Load-more.js"],"sourcesContent":["\nimport '../css/styles.css';\nimport {fetchImg} from './fetchImg';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst endOfSearchText = document.querySelector('.gallery__text');\n\nlet query = '';\nlet page = 1;\nlet loadedHits = 0;\nconst perPage = 40;\n\n\nsearchForm.addEventListener('submit', onSearchForm);\nloadMoreBtn.addEventListener('click', onLoadMoreBtn);\n\nasync function onSearchForm(e) {\n    e.preventDefault();\n\n    page = 1;\n    query = e.currentTarget.searchQuery.value.trim();\n    gallery.innerHTML = '';\n\n    loadMoreBtn.classList.add('is-hidden');\n    endOfSearchText.classList.add('is-hidden');\n    \n    if (query === '') {\n        alertEmptySearch();\n        return;\n    }\n\n    try {\n        const object = await fetchImg(query, page, perPage);\n        const objData = object.data;\n        loadedHits = objData.hits.length;\n       \n        if (objData.totalHits === 0) {\n            alertNoImagesFound();\n            } else {\n                renderGallery(objData.hits);\n                alertImagesToFound(objData);\n                const simpleLightBox = new SimpleLightbox('.gallery a').refresh();\n            }\n\n            if (objData.totalHits > perPage) {\n                loadMoreBtn.classList.remove('is-hidden');\n            }\n        \n        onScroll();\n        \n    } catch (error) {\n        Notiflix.Notify.failure(\"Ooops...Something goes wrong\");\n    }\n\n}\n\nasync function onLoadMoreBtn() {\n    page += 1;\n\n    \n    try {\n        const object = await fetchImg(query, page, perPage);\n        const objData = object.data;\n        \n        const totalHits = objData.totalHits;\n        loadedHits += objData.hits.length;\n        \n\n        renderGallery(objData.hits);\n            const simpleLightbox = new SimpleLightbox('.gallery a').refresh();\n\n        if (loadedHits === totalHits) {\n            loadMoreBtn.classList.add('is-hidden');\n            endOfSearchText.classList.remove('is-hidden');\n            }\n        \n        onScrollMore();\n    } catch (error) {\n        Notiflix.Notify.failure(\"Ooops...Something goes wrong\");\n    }\n\n}\n\n\nfunction renderGallery(images) {\n    const galleryMarkup = images\n        .map(({ id, largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n            return `\n                <a class=\"gallery__link\" href=\"${largeImageURL}\">\n                    <div class=\"photo-card\" id=\"${id}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                    <div class=\"info\">\n                        <p class=\"info-item\">\n                            <b>Likes</b> ${likes}\n                        </p>\n                        <p class=\"info-item\">\n                            <b>Views</b> ${views}\n                        </p>\n                        <p class=\"info-item\">\n                            <b>Comments</b> ${comments}\n                        </p>\n                        <p class=\"info-item\">\n                            <b>Downloads</b> ${downloads}\n                        </p>\n                    </div>\n                </div>\n                </a>\n      `\n       \n        })\n        .join('');\n\ngallery.insertAdjacentHTML('beforeend', galleryMarkup);\n}\n\n\n\nfunction alertImagesToFound(objData) {\n    Notiflix.Notify.success(`Hooray! We found ${objData.totalHits} images.`);\n}\n\nfunction alertEmptySearch() {\n    Notiflix.Notify.failure('This field cannot be empty!');\n}\n\nfunction alertNoImagesFound() {\n    Notiflix.Notify.failure('No images were found for this request, try something else.');\n}\n\nfunction onScroll () {\n      window.scrollBy({\n        top: 0,\n        behavior: 'smooth',\n      });\n}\n\nfunction onScrollMore () {\n     const { height: cardHeight } = document\n        .querySelector('.gallery')\n        .firstElementChild.getBoundingClientRect();\n\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n}\n\n\n\n\n\n\n\n\n \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["$31d6bca022b3bb6e$var$searchForm","document","querySelector","$31d6bca022b3bb6e$var$gallery","$31d6bca022b3bb6e$var$loadMoreBtn","$31d6bca022b3bb6e$var$endOfSearchText","$31d6bca022b3bb6e$var$query","$31d6bca022b3bb6e$var$page","$31d6bca022b3bb6e$var$loadedHits","$31d6bca022b3bb6e$var$renderGallery","images","galleryMarkup","map","id","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","addEventListener","async","e","preventDefault","currentTarget","searchQuery","value","trim","innerHTML","classList","add","$parcel$interopDefault","$eWCmQ","Notify","failure","objData","$dOcJw","fetchImg","data","hits","length","totalHits","success","$31d6bca022b3bb6e$var$alertImagesToFound","$fZKcF","refresh","remove","window","scrollBy","top","behavior","error","height","cardHeight","firstElementChild","getBoundingClientRect","$31d6bca022b3bb6e$var$onScrollMore"],"version":3,"file":"Load-more.9b6d9412.js.map"}